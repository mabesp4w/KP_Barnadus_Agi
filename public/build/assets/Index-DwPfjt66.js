import{r as h,b as i,j as e,L as j}from"./app-Dooz9cHf.js";import{M as N,P as v,G as f,C as w}from"./MapView-BVhSVFxQ.js";import{U as S,S as y}from"./SEO-Bp3mgnZB.js";import{B as _}from"./Badge-BFbo45tX.js";import{C as x,b as C,c as B,a as u}from"./Card-B0G3RUpM.js";import{u as K}from"./useAOS-DdGHiMai.js";import{M as p}from"./map-pin-DrVUcQE4.js";import{S as P}from"./search-8YFgCi95.js";import{S as k}from"./x-DZbbTUlO.js";import{M as A}from"./mail-SFDOxeU-.js";import{A as M}from"./award-BsX-NCjb.js";import"./createLucideIcon-BmYDW1BA.js";import"./leaflet-DivYvL9y.js";import"./log-in-Ck1v0gUD.js";function U({sekolahs:d,kecamatans:o,kelurahans:c,filters:s,sekolahsForMap:r=[]}){K();const n=h.useMemo(()=>!s?.kecamatan||!c?c||[]:c.filter(a=>a.id_kecamatan==s.kecamatan),[s?.kecamatan,c]),b=h.useMemo(()=>!s?.kelurahan||!s?.kecamatan?!0:n.some(a=>a.id==s.kelurahan),[s?.kelurahan,s?.kecamatan,n]);h.useEffect(()=>{if(s?.kecamatan&&s?.kelurahan&&!b){const a={...s};delete a.kelurahan,i.get(l("user.sekolah.index","/sekolah"),a,{preserveState:!0,replace:!0})}},[s?.kecamatan]);const l=(a,t)=>{try{if(typeof route=="function"){const m=route(a);if(m&&m!=="#")return m}return t||"#"}catch{return t||"#"}},g=a=>{const t={A:"success",B:"info",C:"warning",Belum:"error"};return e.jsx(_,{variant:t[a]||"error",children:a||"Belum"})};return e.jsxs(S,{title:"Daftar Sekolah",children:[e.jsx(y,{title:"Daftar Sekolah",description:"Daftar lengkap Sekolah Menengah Pertama (SMP) Yayasan Pendidikan Kristen (YPK) di Kota Jayapura. Temukan informasi sekolah, lokasi di peta interaktif, dan data lengkap setiap sekolah.",keywords:"Daftar Sekolah, SMP YPK Jayapura, Peta Sekolah, Lokasi Sekolah, Informasi Sekolah, NPSN, Akreditasi Sekolah"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 text-center","data-aos":"fade-down",children:[e.jsx("h1",{className:"text-3xl font-bold text-base-content",children:"Daftar Sekolah"}),e.jsx("p",{className:"mt-2 text-base-content/70",children:"Temukan informasi lengkap tentang sekolah di daerah Anda"})]}),e.jsxs(x,{className:"mb-6","data-aos":"fade-up","data-aos-delay":"200",children:[e.jsx(C,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Peta Lokasi Sekolah"]})}),e.jsx(u,{className:"p-0",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-2 left-2 z-[1000] w-full max-w-xs space-y-2 rounded-lg bg-base-100 p-3 shadow-lg",children:[e.jsx("div",{children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),i.get(l("user.sekolah.index","/sekolah"),{...s,search:a.target.search?.value||null},{preserveState:!0})},className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"search",placeholder:"Cari sekolah...",className:"input-bordered input input-sm w-full",defaultValue:s?.search||""}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:e.jsx(P,{className:"h-4 w-4"})}),s?.search&&e.jsx("button",{type:"button",className:"btn btn-outline btn-sm",onClick:()=>{i.get(l("user.sekolah.index","/sekolah"),{...s,search:null},{preserveState:!0})},children:"Reset"})]})}),o&&o.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-1 block text-xs font-semibold",children:"Kecamatan:"}),e.jsxs("select",{className:"select-bordered select w-full select-sm",value:s?.kecamatan||"",onChange:a=>{const t=a.target.value||null;i.get(l("user.sekolah.index","/sekolah"),{...s,kecamatan:t,kelurahan:null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kecamatan"}),o.map(a=>e.jsx("option",{value:a.id,children:a.nm_kecamatan},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-1 block text-xs font-semibold",children:"Kelurahan:"}),e.jsxs("select",{className:"select-bordered select w-full select-sm",value:s?.kelurahan||"",onChange:a=>{i.get(l("user.sekolah.index","/sekolah"),{...s,kelurahan:a.target.value||null},{preserveState:!0})},disabled:s?.kecamatan&&n.length===0,children:[e.jsx("option",{value:"",children:s?.kecamatan?n.length===0?"Tidak ada kelurahan":"Semua Kelurahan":"Pilih Kecamatan terlebih dahulu"}),n&&n.length>0?n.map(a=>e.jsx("option",{value:a.id,children:a.nm_kelurahan},a.id)):s?.kecamatan?null:c?.map(a=>e.jsxs("option",{value:a.id,children:[a.nm_kelurahan," - ",a.kecamatan?.nm_kecamatan]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-1 block text-xs font-semibold",children:"Akreditasi:"}),e.jsxs("select",{className:"select-bordered select w-full select-sm",value:s?.akreditasi||"",onChange:a=>{i.get(l("user.sekolah.index","/sekolah"),{...s,akreditasi:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Akreditasi"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"Belum",children:"Belum"})]})]})]}),(!r||r.length===0)&&(s?.search||s?.kecamatan||s?.kelurahan||s?.akreditasi)&&e.jsx("div",{className:"absolute top-12 right-2 z-[1000] max-w-xs rounded-lg bg-warning/90 p-3 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(p,{className:"h-5 w-5 flex-shrink-0 text-warning-content"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-warning-content",children:"Tidak ada sekolah yang sesuai dengan filter"}),e.jsx("p",{className:"mt-1 text-xs text-warning-content/80",children:"Coba ubah filter atau hapus pencarian untuk melihat semua sekolah."})]})]})}),e.jsx(N,{sekolahs:r||[],height:"500px"}),r&&r.length>0?e.jsxs("p",{className:"mt-2 px-4 pb-4 text-xs text-base-content/60",children:[e.jsx("span",{className:"mr-1 inline-block h-3 w-3 rounded-full bg-blue-500"}),"Menampilkan ",r.length," sekolah di peta. Klik marker untuk melihat informasi sekolah."]}):e.jsx("p",{className:"mt-2 px-4 pb-4 text-xs text-base-content/60",children:s?.search||s?.kecamatan||s?.kelurahan||s?.akreditasi?"Tidak ada sekolah yang sesuai dengan filter.":"Belum ada data sekolah dengan koordinat."})]})})]}),d.data.length===0?e.jsx(x,{"data-aos":"fade-up","data-aos-delay":"250",children:e.jsx(u,{children:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(k,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.kecamatan||s?.kelurahan||s?.akreditasi?"Tidak ada sekolah yang ditemukan.":"Belum ada data sekolah."})]})})}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.data.map((a,t)=>e.jsx(x,{"data-aos":"fade-up","data-aos-delay":250+t*50,children:e.jsxs(u,{children:[a.foto_utama&&e.jsx("div",{className:"mb-4 overflow-hidden rounded-lg",children:e.jsx("img",{src:`/storage/${a.foto_utama}`,alt:a.nm_sekolah,className:"h-48 w-full object-cover transition-transform hover:scale-105"})}),e.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:a.nm_sekolah}),g(a.akreditasi)]}),e.jsxs("div",{className:"space-y-2 text-sm text-base-content/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"font-mono",children:a.npsn})]}),a.kelurahan&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.kelurahan.nm_kelurahan,a.kelurahan.kecamatan&&`, ${a.kelurahan.kecamatan.nm_kecamatan}`]})]}),a.no_telp&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:a.no_telp})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:a.email})]}),a.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:a.website})]}),a.thn_berdiri&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsxs("span",{children:["Berdiri: ",a.thn_berdiri]})]}),a.akreditasi&&a.akreditasi!=="Belum"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsxs("span",{children:["Akreditasi: ",a.akreditasi]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{href:l("user.sekolah.show",`/sekolah/${a.id}`),className:"btn w-full btn-sm btn-primary",children:"Lihat Detail"})})]})},a.id))}),d.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center","data-aos":"fade-up",children:e.jsx("div",{className:"join",children:d.links.map((a,t)=>e.jsx(j,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})}export{U as default};
